Triggers
--------

-Triggers are in used of PL SQL side
--Triggers is a even driven program unit, when there is a certain event happens Oracle calls for it, we say event fires the triggers
--Mainly , Triggers have 3 types of DML Triggerr i,e insert, update and delete
-- We can also define the triggers
	1) once for statement
	2) once for every row
--And we can choose the fire the triggers
	1) before or after the statement
	2) before or after the row
--generally statement triggers are faster then the row-level triggers, coz its Firing once for the statement


In SQL Development.
--You can create the trigger, by right click on the Trigger object
a)Under trigger tab, select trigger type -> table and select the which table name you want.
b)Select what sort of DML trigger should you want insert, delete,update
c)Refercing  old or new trigger
d)Define the trigger fire before or after
e)and it is statement level or row level.

Simple Triggers
Use the simple_employees_pk_trg.sql

Compound Triggers
=================
--it is available in only in Oracle DB 11g only.
--basically this type of triggers it consists before, after, row and statement into a single trigger and it organises into all units into single place
-compound_trg.sql


It is possible to have triggers on views, if you find it requires some special triggers where for the joins,aggreates...etc.
consider the example on HR schema.

hr_emps_by_dept_vw.sql
This allows to get the count of employess by department_id and create a view for this aggreations.

CREATE OR REPLACE VIEW hr_emps_by_dept
AS
  SELECT first_name, 
         last_name, 
         department_id, 
         count(*) over (partition by department_id) dept_cnt
    FROM employees;

Apply the trigger @View 
-----------------------

In this view, we find for the record last_name='Grant' has null department_id, let us modify update the dept_id  using update statement

hr_emps_by_dept_vw.sql

UPDATE hr_emps_by_dept
  SET department_id = 10
  WHERE first_name = 'Kimberely';



Instead of Trigger
===================

the above operations cannot be operated directly on the view, coz it has some analytical operations.instead of using update, 
we can apply triggers 'instead of' triggers . for example

instead_of_trg.sql. 
Now you are saying, instead of update the view 'HR_EMPS_BY_DEPT' , directly update on the employees table, where with the new department_id

CREATE OR REPLACE TRIGGER UPD_EMPS_BY_DEPT 
INSTEAD OF UPDATE ON HR_EMPS_BY_DEPT 
BEGIN
  UPDATE employees
    SET department_id = :new.department_id
    WHERE last_name = :old.last_name;
END;
/

Now run the hr_emps_by_dept_vw.sql and check HR_EMPS_BY_DEPT view. all the relvant record last_name = 'Grant' has been updated with department_id = 10 

Different types of Triggers
---------------------------
1)Database Triggers
2) DDL Triggers

which are advanced topics,
Like database triggers include DDL triggers like grant premission and also event triggers event trigger logon and shutdown Triggers.

types of triggers
-----------------
1)tables
2)Views
3)Schema
4)Database





























